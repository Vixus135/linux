# Упражнение 2:  Пул потоков с разделенными мьютексами
### Задание
Реализовать сервер с пулом потоков-обработчиков, где один поток добавляет запросы
в общий список, а несколько потоков обрабатывают эти запросы. Основная задача - 
разделить роли мьютексов для защиты списка запросов и синхронизации потоков

## Логика программы
Программа реализует многопоточный сервер при помощи разделения обязанностей:

1. Главный поток - создает запросы и добавляет их в общий список

2. Потоки-обработчики (3 шт) - извлекают запросы из списка и обрабатывают их

Как и просилось в задании мьютексы были разделены:
- `list_mu` - мьютекс, защищающий только список запросов и счетчик
- `req` - условная переменная, синхронизирующая потоки-обработчики

## Почему программа работает
Программа работает благодаря правильному разделению:

1. Раздельные мьютексы уменьшают конкуренцию (потоки не блокируют друг друга)

2. Каждый мьютекс защищает свою область (`list_mu` - только структуры данных,
   а условная переменная координирует потоки)

3. Использование цикла `while` при проверке условия защищает от ложных пробуждений - даже если поток проснется без получения сигнала, он проверит условие повторно

4. Функция `pthread_cond_wait()` автоматически разблокирует мьютекс при входе в
   ожидание и автоматически блокирует его снова при пробуждении

Последовательность работы потоков-обработчиков:
- Пытаются взять запрос из списка
- Если запрос есть - обрабатывают его
- Если запросов нет - переходят в ожидание на условной переменной
- При получении сигнала проверяют условие снова

## Структура проекта
Изначально программа была реализована в одном файле `mute.c`, но для лучшего понимания 
и читаемости кода (я надеюсь) была разделена на два файла:

1. `main.c`, содержащий основную логику программы:
   - Создание пула потоков-обработчиков
   - Генерация запросов
   - Управление жизненным циклом приложения

2. `funcs.c`, содержащий вспомогательные функции для работы с запросами:
   - `add_request()` - добавление запроса в список
   - `get_rqst()` - извлечение запроса из списка  
   - `handle_rqst()` - обработка запроса
   - `reqs_loop()` - основной цикл обработчика

## Компиляция и запуск
Для компиляции программы используйте команду:
```bash
make
```
                                                   
Для запуска:
```bash
./mutex_sharing
```

Программа создаст 10 запросов с интервалом в 1 секунда и завершится после их обработки.

**Примечание:** в моей реализации кода из методички не используется рекурсивный мьютекс, так как
разделение ответственности устранило проблему двойной блокировки
